
SETUP

aws iotanalytics create-channel --channel-name etl_device_data

aws iam create-role --role-name EtlAnalyticsRole --assume-role-policy-document file://policy_assume_role.json
aws iam put-role-policy --role-name EtlAnalyticsRole --policy-name EtlAnalyticsPolicy --policy-document file://policy_etl_analytics.json
aws iot create-topic-rule --rule-name etl_analytics --topic-rule-payload file://topic_rule.json

aws iotanalytics create-datastore --cli-input-json file://datastore.json

aws iotanalytics create-pipeline --cli-input-json file://pipeline.json

aws iotanalytics create-dataset --cli-input-json file://dataset.json


TEAR DOWN

aws iam delete-role-policy --role-name EtlAnalyticsRole --policy-name EtlAnalyticsPolicy
aws iam delete-role --role-name EtlAnalyticsRole
aws iot delete-topic-rule --rule-name onetime_analytics

aws iotanalytics delete-channel --channel-name etl_device_data

aws iotanalytics delete-dataset --dataset-name etl_aggregate_data